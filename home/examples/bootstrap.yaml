#!/usr/bin/env titi
# Bootstrap Example - Self-Hosting Monoidal Computer
# Demonstrates rebuilding the YAML parser and applying supercompilation

!seq
- !print "╔════════════════════════════════════════╗"
- !print "║  MONOIDAL COMPUTER BOOTSTRAP SEQUENCE  ║"
- !print "╚════════════════════════════════════════╝"

- !print "\n=== Step 1: Rebuild YAML Parser ==="
- !seq
  - !lex lib/computer/yaml.l
  - !yacc ["-d", "lib/computer/yaml.y"]
  - !cc ["lex.yy.c", "y.tab.c", "-lfl", "-o", "yaml_parser"]
  - !print "✓ Parser rebuilt successfully"

- !print "\n=== Step 2: Demonstrate Supercompilation ==="
- !print "Applying supercompilation to optimize code..."
- !supercompile
  !data "example_program"

- !print "\n=== Step 3: Demonstrate Futamura Projection ==="
- !print "Compiling interpreter with fixed program..."
- !futamura1
  - !program eval
  - !data "test_input"

- !print "\n=== Step 4: Demonstrate Hypercomputation ==="
- !print "Computing Ackermann(2, 2)..."
- !ackermann

- !print "\n╔════════════════════════════════════════╗"
- !print "║     BOOTSTRAP COMPLETE - SELF-HOSTED   ║"
- !print "╚════════════════════════════════════════╝"

